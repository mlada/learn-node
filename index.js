const fs = require('fs');const path = require('path');// pathconst catalogPath = '/Users/mlada/Downloads/VK audio/';const downloadPath = '/Users/mlada/Downloads/';const newCatalogPath = '/Users/mlada/Music/Sorted';const outputPath = __dirname + '/output/';const fileType = /.jpg/i;const zipPath = '/Users/mlada/Zip/Sorted';const newPathDefault = __dirname + '/newPathDefault/';var dataMsg;function toLog(msg) {    console.log(msg)    return dataMsg = dataMsg + msg;}function createPath(path) {    path        .split('/')        .reduce((currentPath, folder) => {            currentPath += folder + '/';            if (!fs.existsSync(currentPath)){                fs.mkdirSync(currentPath);            }            return currentPath;        }, '');}function sortLib(currentPath,newPath,file) {    createPath(newPath);    fs.readdir(currentPath, (err, files) => {        if (err) {            toLog('readdir ', err);        }        files.forEach((item) => {            if (fs.lstatSync(path.join(currentPath, item)).isDirectory()) {                const callPath = currentPath + '/' + item;                sortLib(callPath, newPath, file);            } else {                // if (item.match(file) != null) {                    //для всех аудио в корневой                    //создаем подпапки                    var elementNewPath = newPath + '/' + item.substring(0, 1);                    fs.mkdir(path.join(elementNewPath), (err) => {                        if (err) {                            toLog('папка существует ', err);                        };                        fs.copyFile(path.join(currentPath, item), path.join(elementNewPath, item), (err) => {                            if (err) {                                toLog('copyFile ', err);                            }                        });                        fs.unlink(path.join(currentPath, item), (err) => {                            if (err) {                                toLog('unlink ', err);                            }                            ;                        });                    });                }            // }        });    });};var firstParam = (process.argv[2]) ? (process.argv[2]) : __dirname + '/input/';var secondParam = (process.argv[3]) ? (process.argv[3]) : __dirname + '/output/';var thirdParam = (process.argv[4]) ? (process.argv[4]) : false;sortLib(firstParam,secondParam,fileType);console.log('initDir : ', process.argv[2])console.log('endDir : ', process.argv[3])console.log('isNeedToBeDeleted : ', process.argv[4])if (thirdParam){    fs.unlink(path.join(firstParam), (err) => {        if (err) {            toLog('unlink ', err);        } ;    });}